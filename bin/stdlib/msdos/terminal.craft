#include "io.ch"
void terminal_backspace();
uint8 recv_key();
void terminal(uint8* buf, uint16 len)
{
	uint16 i = 0;
	while(1)
	{
		uint8 key = recv_key();
		if (key == 13)
		{
			print_str("\n\r");
			break;
		}
		else if(key == 8)
		{
			terminal_backspace();
			buf[i] = 0;
			i -= 1;
		}
		else
		{
			if (i != len-1)
			{
				buf[i] = key;
				i += 1;
				print_char(key);
			}
		}
		
	}
	
	buf[i] = 0;
}